function Bitmap(t){var e=[0,0,0],i=[],a=0,h=0,l=0,o=0,r=0,s=0;this.pad=function(t,e){r=t,s=e},this.color=function(t,i,a){e=[t,i,a]},this.extent=function(t,e,i,r){t=Math.floor(t),e=Math.floor(e),i=Math.floor(i),r=Math.floor(r),a>t&&(a=t),h>e&&(h=e),l<i&&(l=i),o<r&&(o=r)},this.set=function(t,r,s){t=Math.floor(t),r=Math.floor(r),i.push([t,r,e,s]),a>t&&(a=t),h>r&&(h=r),l<t&&(l=t),o<r&&(o=r)},this.show=function(e,n){var f=e instanceof window.HTMLCanvasElement?e:document.getElementById(e);if(0==i.length)return f.width=32,f.height=32,f.getContext("2d").clearRect(0,0,f.width,f.height),void(f.style.visibility="visible");if("R"==n||"L"==n)var v=l-a+1,g=o-h+1;else var g=l-a+1,v=o-h+1;if(f.width=g+2*r,f.height=v+2*s,t&&8==t.length){var d=parseInt(t.substr(0,2),16)/255,u=parseInt(t.substr(2,2),16)/255,c=parseInt(t.substr(4,2),16)/255,M=parseInt(t.substr(6,2),16)/255,b=Math.floor((1-d)*(1-M)*255),w=Math.floor((1-u)*(1-M)*255),p=Math.floor((1-c)*(1-M)*255);t="rgb("+b+","+w+","+p+")"}else t&&(t="#"+t);var I=f.getContext("2d");I.fillStyle=t||"#fff",I.fillRect(0,0,f.width,f.height),I.fillStyle="#000";for(var y=I.getImageData(0,0,f.width,f.height),m=y.data,x=0;x<i.length;x++){var C=i[x][0]-a,c=i[x][1]-h,d=i[x][2],L=i[x][3]/255;if("N"==n)c=v-c-1;else if("I"==n)C=g-C-1;else if(c=g-c,"L"==n){R=c;c=v-C-1,C=R-1}else{var R=C;C=g-c,c=R}var B=4*(c*y.width+C);m[B+0]=m[B+0]*(1-L)+d[0]*L|0,m[B+1]=m[B+1]*(1-L)+d[1]*L|0,m[B+2]=m[B+2]*(1-L)+d[2]*L|0,m[B+3]=255}I.putImageData(y,r,s),f.style.visibility="visible"}}